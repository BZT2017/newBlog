import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,o as l,b as a,a as n,d as s}from"./app-D0kEoSDD.js";const p="/assets/images/202207071835850.png",i={},o=a('<p><img src="'+p+`" alt="wepback简易流程图" loading="lazy"></p><h2 id="为什么要使用webpack" tabindex="-1"><a class="header-anchor" href="#为什么要使用webpack"><span>为什么要使用webpack</span></a></h2><p>上古时代，通过script标签引入的方法会导致以下几个问题</p><ul><li><p>作用域问题</p><p><strong>IIFE方案</strong> 可以解决作用域问题，但是该方案会存在大量无用代码，文件体积过大，导致构建速度与加载效率问题，所以不得不对代码进行拆分</p></li><li><p>代码拆分问题</p><p><strong>nodejs</strong> 基于 <strong>commonjs</strong> 的方案可以解决代码拆分问题，但是无法在浏览器运行</p></li><li><p>如何让浏览器支持模块</p><p><strong>browesrify</strong> 与 <strong>requirejs</strong> 的方案可以使类似commonjs运行在浏览器内，但是使用起来对比commonjs不够简洁</p><p><strong>esmodule</strong> 是es提出的规范，专门用来做模块管理，但这种方案对浏览器的支持不够完整</p></li></ul><h2 id="竞品" tabindex="-1"><a class="header-anchor" href="#竞品"><span>竞品</span></a></h2><ul><li><p><strong>parcel</strong></p><p>如果你想构建简单的应用并让他快速的运行起来</p></li><li><p><strong>rollup</strong></p><p>如果你想构建一个类库并集成很少的第三方库</p></li><li><p><strong>vite</strong></p><p>本地构建速度极快，开发编译速度快，热更新体验丝滑</p></li></ul><h2 id="webpack配置" tabindex="-1"><a class="header-anchor" href="#webpack配置"><span>webPack配置</span></a></h2><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
<span class="token keyword">const</span> path<span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 入口文件</span>
  <span class="token literal-property property">entey</span><span class="token operator">:</span> <span class="token string">&#39;.src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 输出配置</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;script/bundle.js&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 输出文件路径</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;./dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 清理dist文件</span>
    <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 非必须定义</span>
  <span class="token comment">// 开发环境调试工具，用来使本地IDE内的代码与打包后浏览器内的源代码保持一致</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 插件配置</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p><strong>path.resolve()</strong>：用于 <strong>将相对路径转为绝对路径</strong></p><ul><li><p>它可以接受多个参数，依次表示所要进入的路径，直到将最后一个参数转为绝对路径。</p></li><li><p>如果根据参数无法得到绝对路径，就以当前所在路径作为基准。</p></li><li><p>除了根目录，该方法的返回值都不带尾部的斜杠。</p></li></ul><p><strong>__dirname</strong>：获得<strong>当前执行文件</strong>所在目录的<strong>完整目录名</strong></p></div><h2 id="webpack常用插件" tabindex="-1"><a class="header-anchor" href="#webpack常用插件"><span>webpack常用插件</span></a></h2><p>帮助webpack在编译过程中处理某些特定任务的工具，如打包优化、资源管理等等</p><ul><li><p>Community 社区的插件</p></li><li><p>Webpack 内置插件</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p><strong>TerserPlugin</strong> 是webpack内置的插件，用来清除debug与console，并实现js代码压缩</p><p>但是配置CSS压缩插件 <strong>CssMinimizerPlugin</strong> 后会导致该插件失效，需要手动安装 terser-webpack-plugin ,引入后配置到optimization</p></div></li><li><p>Webpack Contrib 第三方插件</p></li></ul><h2 id="webpack-dev-server" tabindex="-1"><a class="header-anchor" href="#webpack-dev-server"><span>webpack-dev-server</span></a></h2><p>用来实行代码热更新的工具</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>不会输出任何物理文件，只是把webpack输出的dist文件放入了内存</p></div><ul><li>配置<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 将启动的服务器地址指向本地的dist目录下</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="资源模块" tabindex="-1"><a class="header-anchor" href="#资源模块"><span>资源模块</span></a></h2><p>项目中使用<strong>esmodule</strong>引入方法（import xxx from &#39;./xxxx.js&#39;）</p><p>配置资源的输出路径</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// 资源模块输出文件路径&amp;文件名</span>
    <span class="token comment">// [contenthash] 表示使用文件内容自动生成文件名</span>
    <span class="token comment">// [ext] 表示使用文件自己的扩展名</span>
    <span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&#39;&lt;路径&gt;/[contenthash].[ext]&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p><strong>output</strong> 内设置的资源输出规则优先级小于在 <strong>rule --&gt; generator</strong> 内设置的优先级</p></div><h3 id="asset-resource" tabindex="-1"><a class="header-anchor" href="#asset-resource"><span>asset/resource</span></a></h3><p>表示该资源导出类型为<strong>url</strong>的格式,可加载字体文件</p>`,23),c=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rule"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token operator"},"..."),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 正则匹配"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.png$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"type"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'asset/resource'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token comment"},"// 设置输出资源的规则，优先级大于output"),s(`
        `),n("span",{class:"token literal-property property"},"generator"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'<路径>/[contenthash].[ext]'"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 还可以加载字体"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.(woff|woff2|eot|ttf|otf)$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"type"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'asset/resource'"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),r=a(`<p>输入结果为：</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xxxxxxxxxxxx.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="asset-inline" tabindex="-1"><a class="header-anchor" href="#asset-inline"><span>asset/inline</span></a></h3><p>表示该资源导出类型为<strong>base64</strong>格式</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rule</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输入结果为：</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data:image/svg+xml;base64,xxxxxxxxxxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="asset-source" tabindex="-1"><a class="header-anchor" href="#asset-source"><span>asset/source</span></a></h3><p>表示该资源导出类型为<strong>源代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rule</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.text$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>引入text文件并将它写入div内</p><p>输入结果为：</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>xxxxxxxxxxxx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="asset" tabindex="-1"><a class="header-anchor" href="#asset"><span>asset</span></a></h3><p>通用资源类型</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>文件<strong>大于8K</strong>将使用<strong>resource</strong>策略，<strong>小于8K</strong>使用<strong>inline</strong>策略</p><p>可以通过 <strong>parser.dataUrlCondition.maxSize</strong> 配置该临界值</p></div>`,16),u=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rule"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token operator"},"..."),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.text$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"type"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'asset'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token comment"},"// 设置临界值"),s(`
        `),n("span",{class:"token literal-property property"},"parser"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"dataUrlCondition"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token literal-property property"},"maxSize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"4"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"1024"),s(),n("span",{class:"token comment"},"// 4M"),s(`
          `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),d=a(`<h2 id="loaders" tabindex="-1"><a class="header-anchor" href="#loaders"><span>loaders</span></a></h2><p>为了解析某些文件，例如 <strong>css、xml、cxv</strong>等文件</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>webpack开箱自带的解析器只可以解析<strong>js、json</strong>这样的文件</p><p>xml、cxv文件不需要引入可直接配置</p></div><ol><li><p>安装相应的loader</p></li><li><p>引入loader</p></li><li><p>配置loader</p><p>使用方法：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rule</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.text$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// use表示解析.text文件时，在打包前先用raw-loader转化</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;raw-loader&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="加载样式" tabindex="-1"><a class="header-anchor" href="#加载样式"><span>加载样式</span></a></h3><p>使用前需要先安装less-loader、css-loader、style-loader</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">rule</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>use为数组时有加载顺序，顺序为<strong>从后往前</strong>,即先加载less-loader,再加载css-loader，最后加载style-loader，调用方式为链式调用</p><p>第一个loader会将转化后的结果传递给下一个loader，最后返回一个js供webpack解析</p></div><h3 id="抽离-压缩css" tabindex="-1"><a class="header-anchor" href="#抽离-压缩css"><span>抽离 &amp; 压缩css</span></a></h3>`,9),k=n("ul",null,[n("li",null,[n("p",null,"抽离css"),n("ol",null,[n("li",null,"安装 mini-css-extract-plugin"),n("li",null,"引入该插件")]),n("p",null,[s("该插件会将工程内多个css文件合并为一个css文件，并插入 "),n("strong",null,"< head >"),s(" 标签内")]),n("div",{class:"hint-container warning"},[n("p",{class:"hint-container-title"},"注意"),n("p",null,[s("插入head标签的效果得益于 "),n("strong",null,"html-webpack-plugin")])]),n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"HtmlWebpackPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"template"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./index.html'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'app.html'"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"inject"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'body'"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"MiniCssExtractPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'<路径>/[contenthash].css'"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rule"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token operator"},"..."),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.(css|less)$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"use"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s("MiniCssExtractPlugin"),n("span",{class:"token punctuation"},"."),s("loader，"),n("span",{class:"token string"},"'style-loader'"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'css-loader'"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'less-loader'"),n("span",{class:"token punctuation"},"]"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])]),n("li",null,[n("p",null,"压缩css"),n("ol",null,[n("li",null,"安装 css-minimizer-webpack-plugin"),n("li",null,"引入该插件"),n("li",null,[s("在 ("),n("strong",null,"optimization"),s(") 优化属性内配置")])]),n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"minimizer"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"CssMinimizerPlugin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])]),n("div",{class:"hint-container warning"},[n("p",{class:"hint-container-title"},"注意"),n("p",null,"压缩代码时注意，应只在生产环境设置代码压缩，即 mode: 'production'")])])],-1),v=n("h3",{id:"自定义json模块parser",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#自定义json模块parser"},[n("span",null,"自定义json模块parser")])],-1),m=n("p",null,[s("解析 "),n("strong",null,"yaml、toml、json5"),s(" 类型的文件")],-1),b=n("ol",null,[n("li",null,"安装 yaml、toml、json5"),n("li",null,"require 进 webpack.config.js文件"),n("li",null,"配置解析器")],-1),g=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rule"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token operator"},"..."),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// toml、json5与此方法一致"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.yaml$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"type"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'json'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"parser"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"parse"),n("span",{class:"token operator"},":"),s(" yaml"),n("span",{class:"token punctuation"},"."),s(`parse
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),h=n("h2",{id:"babel-loader",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#babel-loader"},[n("span",null,"babel-loader")])],-1),y=n("ul",null,[n("li",null,[n("p",null,"简介"),n("p",null,[s("babel-loader是用来保证 "),n("strong",null,"ES6"),s(" 代码能运行在不同浏览器内的js解析器")])]),n("li",null,[n("p",null,"核心插件"),n("ul",null,[n("li",null,[n("p",null,"babel-loader：在webpack里应用babel解析ES6的桥梁")]),n("li",null,[n("p",null,"@babel/core： babel核心模块")]),n("li",null,[n("p",null,"@babel/runtime：babel运行时需要")]),n("li",null,[n("p",null,"@babel、plugin-transform-runtime:"),n("p",null,"该插件会在regeneratorRuntime的地方自动require导包，编译时需要")]),n("li",null,[n("p",null,"@babel/preset-env：babel预设的一组babel插件集合")])]),n("div",{class:"hint-container tip"},[n("p",{class:"hint-container-title"},"提示"),n("p",null,[n("strong",null,"regeneratorRuntime"),s(" 是webpack打包生成的全局辅助函数，由babel生成，用于兼容async/await语法")])])]),n("li",null,[n("p",null,"使用"),n("ol",null,[n("li",null,"安装 babel-loader、@babel/core、@babel/preset-env"),n("li",null,"配置loader")]),n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"rule"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
      `),n("span",{class:"token operator"},"..."),s(`
      `),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"\\.js$"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token comment"},"// 设置此loader忽略的文件夹"),s(`
        `),n("span",{class:"token literal-property property"},"exclude"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"node_modules"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token literal-property property"},"use"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token literal-property property"},"loader"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'babel-lodaer'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"options"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"// 配置预设插件"),s(`
            `),n("span",{class:"token literal-property property"},"presets"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'@babel/preset-env'"),n("span",{class:"token punctuation"},"]"),s(`，
            `),n("span",{class:"token comment"},"// 配置babel-lodaer的插件"),s(`
            `),n("span",{class:"token literal-property property"},"plugins"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s(`
              `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'@babel/plugin-transform-runtime'"),n("span",{class:"token punctuation"},"]"),s(`
            `),n("span",{class:"token punctuation"},"]"),s(`
          `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"]"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])])],-1),x=a('<h2 id="代码分离" tabindex="-1"><a class="header-anchor" href="#代码分离"><span>代码分离</span></a></h2><p>优点：可以用于获取更小的 <strong>bundle</strong>（打包分离出来的文件），以及控制资源加载的优先级</p><p>代码引入有两种：</p><ol><li>动态引入：import函数引入</li><li>静态引入：</li></ol><h3 id="入口起点" tabindex="-1"><a class="header-anchor" href="#入口起点"><span>入口起点</span></a></h3><p>配置entry</p>',6),j=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
 `),n("span",{class:"token operator"},"..."),s(`
 entry：`),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token literal-property property"},"index_1"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./xxxx/xxxx.js'"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"index_2"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./xxxx/xxxx.js'"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token comment"},"// [name] 可以拿到entry里面的key的值，在此处为index_1和index_2"),s(`
   `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),n("span",{class:"token string"},"'[name].bundle.js'"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'./dist'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"clean"),n("span",{class:"token operator"},":"),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"assetModuleFilename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'imges/[contenthash][ext]'"),s(`
 `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=a(`<p>打包结果：</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index_1.bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index_2.bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>该方法会将多个入口文件所引用的通用代码库重复打包，须结合 <strong>防止重复</strong> 方案运用</p><p>例如：index_1中引入了lodash，index_2中也引入lodash，webpack会将两者引入的lodash分别打包到相应的bundle内,而我们期望这个公用库只需要打包一次</p></div><h3 id="防止重复" tabindex="-1"><a class="header-anchor" href="#防止重复"><span>防止重复</span></a></h3><p>通过定义 <strong>dependOn（入口依赖）</strong> 属性和 <strong>shared</strong> 属性，wepback可以将两者公共的库抽取出来，形成名为shared的 <strong>chunk</strong>（数据块）</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>定义的shared最终会以script标签形式追加到body标签里</p><p>注意点请看注释</p><p>项目中可以使用插件帮助我们自动分离重复的库</p></div>`,6),f=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
 `),n("span",{class:"token operator"},"..."),s(`
 entry：`),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token literal-property property"},"index_1"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
     `),n("span",{class:"token keyword"},"import"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./xxxx/xxxx.js'"),n("span",{class:"token punctuation"},","),s(`
     `),n("span",{class:"token literal-property property"},"dependOn"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'shared'"),s(`
   `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"index_2"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
     `),n("span",{class:"token keyword"},"import"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./xxxx/xxxx.js'"),n("span",{class:"token punctuation"},","),s(`
     `),n("span",{class:"token literal-property property"},"dependOn"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'shared'"),s(`
   `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token comment"},"// 注意：最终打包出来的bundle名由key定义"),s(`
   `),n("span",{class:"token literal-property property"},"shared"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'lodash'"),s(`
 `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token comment"},"// [name] 可以拿到entry里面的key的值，在此处为index_1和index_2"),s(`
   `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),n("span",{class:"token string"},"'[name].bundle.js'"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(" path"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'./dist'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"clean"),n("span",{class:"token operator"},":"),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"assetModuleFilename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'imges/[contenthash][ext]'"),s(`
 `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_=n("div",{class:"hint-container tip"},[n("p",{class:"hint-container-title"},"提示"),n("p",null,[s("也可以使用wepback内置的 "),n("strong",null,"split-chunks-Plugin"),s(" 插件抽离出重复的库")]),n("p",null,[s("抽离出的bundle文件名以 "),n("strong",null,"vendors-node_modules_"),s(" 开头")])],-1),q=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
 `),n("span",{class:"token operator"},"..."),s(`
 entry：`),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token literal-property property"},"index_1"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./xxxx/xxxx.js'"),n("span",{class:"token punctuation"},","),s(`
   `),n("span",{class:"token literal-property property"},"index_2"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./xxxx/xxxx.js'"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
 `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
   `),n("span",{class:"token operator"},"..."),s(`
   `),n("span",{class:"token literal-property property"},"splitChunks"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
     `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'all'"),s(`
   `),n("span",{class:"token punctuation"},"}"),s(`
 `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),z=n("h3",{id:"动态引入",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#动态引入"},[n("span",null,"动态引入")])],-1),C=n("p",null,[s("使用 "),n("strong",null,"import"),s(" 函数实现, wepback会识别import异步引入的库，并将它打包为"),n("strong",null,"vendors-node_modules_"),s(" 开头的bundle文件")],-1),M=n("p",null,"魔法注释：",-1),P=n("ul",null,[n("li",null,[n("p",null,"懒加载"),n("p",null,[s("懒加载用到的bundle"),n("strong",null,"只有在用户使用的时候"),s("才会向服务器发送请求，页面初始化时不会请求，这样可以节省带宽")]),n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 需要使用懒加载的文件"),s(`
`),n("span",{class:"token operator"},"..."),s(`
`),n("span",{class:"token comment"},"// import内部的注释叫魔术注释，webpack会将该模块打包为名为math的bundle"),s(`
`),n("span",{class:"token function-variable function"},"util"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"=>"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token comment"},"/* webpackChunkName: 'math' */"),n("span",{class:"token string"},"'./<util>.js'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])]),n("li",null,[n("p",null,"预获取/预加载"),n("p",null,"使用魔法注释"),n("ul",null,[n("li",null,[n("p",null,[s("/* webpackPrefetch: true */：实行"),n("strong",null,"预获取"),s("模式，在首页内容加载完毕后加载")]),n("div",{class:"hint-container warning"},[n("p",{class:"hint-container-title"},"注意"),n("p",null,"预加载在初始化时请求一次，在使用时也会请求一次"),n("p",null,"下载是发生在父级chunk加载完成之后"),n("p",null,"会在head标签内新增link标签")]),n("div",{class:"language-html line-numbers-mode","data-ext":"html","data-title":"html"},[n("pre",{html:"",class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("head")]),n("span",{class:"token punctuation"},">")]),s(`
  ...
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("link")]),s(),n("span",{class:"token attr-name"},"rel"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("prefetch"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"as"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("script"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"href"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("http://xxxxx/xxx.bundle.js"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("head")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])]),n("li",null,[n("p",null,[s("/* webpackPreload: true */：实行"),n("strong",null,"预加载"),s("模式，与懒加载行为一致")]),n("div",{class:"hint-container warning"},[n("p",{class:"hint-container-title"},"注意"),n("p",null,[s("异步chunk会和父级chunk"),n("strong",null,"并行加载"),s(",不当地使用wepbackPreload会损害性能")]),n("p",null,"会在head标签内新增link标签")]),n("div",{class:"language-html line-numbers-mode","data-ext":"html","data-title":"html"},[n("pre",{html:"",class:"language-html"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("head")]),n("span",{class:"token punctuation"},">")]),s(`
  ...
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("link")]),s(),n("span",{class:"token attr-name"},"rel"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("preload"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"as"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("script"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"href"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("http://xxxxx/xxx.bundle.js"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("head")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])])])])],-1),S=n("h2",{id:"优化缓存",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#优化缓存"},[n("span",null,"优化缓存")])],-1),T=n("h3",{id:"解决chunk文件缓存问题",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#解决chunk文件缓存问题"},[n("span",null,"解决chunk文件缓存问题")])],-1),E=n("p",null,[s("因为每次打包"),n("strong",null,"相同的bundle文件名会被浏览器缓存"),s("，在文件被更改时不会获取最新内容，所以需要配置可替换模板字符串来解决此问题")],-1),R=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token comment"},"// 输出配置"),s(`
  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token operator"},"..."),s(`
    `),n("span",{class:"token comment"},"// 设置可替换模板字符串[contenthash]，根据文件内容生成的hash值"),s(`
    `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'[name].[contenthash].js'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),$=n("h3",{id:"缓存第三方库",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#缓存第三方库"},[n("span",null,"缓存第三方库")])],-1),F=n("p",null,"由于第三方库很少被开发者修改，则可以利用浏览器缓存来减少请求",-1),I=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token comment"},"// 输出配置"),s(`
  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token operator"},"..."),s(`
    `),n("span",{class:"token literal-property property"},"spiltChunks"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token comment"},"// 设置缓存组"),s(`
      `),n("span",{class:"token literal-property property"},"cacheGroups"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token literal-property property"},"vendor"),n("span",{class:"token operator"},":"),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token comment"},"// 一般第三方库安装在node_modules文件夹"),s(`
          `),n("span",{class:"token literal-property property"},"test"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token regex"},[n("span",{class:"token regex-delimiter"},"/"),n("span",{class:"token regex-source language-regex"},"[\\\\/]node_modules[\\\\/]"),n("span",{class:"token regex-delimiter"},"/")]),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'vendors'"),n("span",{class:"token punctuation"},","),s(`
          `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'all'"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),N=n("h2",{id:"生产环境与开发环境配置",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#生产环境与开发环境配置"},[n("span",null,"生产环境与开发环境配置")])],-1),U=n("p",null,[s("webpack切换打包环境通过 "),n("strong",null,"mode"),s(" 属性配置，有两个值")],-1),Z=n("ul",null,[n("li",null,[n("strong",null,"production"),s("：表示生产环境")]),n("li",null,[n("strong",null,"development"),s("：表示开发环境")])],-1),D=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{javascript:"",class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js文件"),s(`
module`),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token operator"},"..."),s(`
  `),n("span",{class:"token comment"},"// 环境配置 production | development"),s(`
  `),n("span",{class:"token literal-property property"},"mode"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'production'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),B=a(`<p>在实际的开发环境中，不可能手动修改mode的值来切换打包模式，于是需要将module.exports出去的对象转换成函数，通过 <strong>env</strong> 获取当前打包的环境</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
<span class="token operator">...</span>
<span class="token comment">// 此处的env对应着npm执行命令 --env 后的值</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 将配置对象return出去</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// </span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> env<span class="token punctuation">.</span>production <span class="token operator">?</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在终端打包时携带 --env production</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx webpack <span class="token parameter variable">--env</span> production 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>--env 后的值还支持键值对，例如 --env goal=local</p><p>可以通过 env.goal 获取</p></div><h3 id="配置拆分" tabindex="-1"><a class="header-anchor" href="#配置拆分"><span>配置拆分</span></a></h3><p>通过改变env环境变量虽然可以实现打包类型的修改，但是无法针对环境做定制化配置，于是需要做环境配置拆分</p><ol><li><p>在根目录新建config文件夹，并新建 <strong>webpack.config.prod.js</strong> 、<strong>webpack.config.prod.js</strong> 与 <strong>webpack.config.common.js</strong> 文件</p></li><li><p>编写相应的配置，如</p></li></ol><ul><li><p>prod: 添加代码压缩、去除source-map、添加文件缓存、添加公共路径</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.prod.js文件</span>
<span class="token operator">...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 添加文件缓存[contenthash]</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;script/[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:8080/&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 提示用户包的体积过大,生产环境关闭提示</span>
  <span class="token literal-property property">performance</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">hints</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>dev: 去除代码压缩、添加source-map、添加启动服务配置（devServer）、去除文件缓存（[contenthash]）、去除publicPath</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.dev.js文件</span>
<span class="token operator">...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 删除文件缓存[contenthash]</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;script/[name].js&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 添加source-map</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 添加启动服务配置</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>common：公共的配置</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.common.js文件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// all</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 输出文件路径为../dist，因为现在的执行环境在 scr/config 文件内</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&#39;../dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext]&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// all</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// all</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">spiltChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// all</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="配置文件合并" tabindex="-1"><a class="header-anchor" href="#配置文件合并"><span>配置文件合并</span></a></h3><p><strong>webpack-merge</strong> 插件可以帮助我们合并这三个配置文件</p><ol><li><p>安装 <strong>webpack-merge</strong> 插件</p></li><li><p>在config文件夹下新建 <strong>webpack.config.js</strong> 用它来充当配置的入口文件</p></li><li><p>配置 webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js文件</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> commonConfig  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.common&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> productionConfig  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.prod&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> developmentConfig  <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.dev&#39;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> env<span class="token punctuation">.</span>development<span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> developmentConfig<span class="token punctuation">)</span>
    
    <span class="token keyword">case</span> env<span class="token punctuation">.</span>production<span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> productionConfig<span class="token punctuation">)</span>

    <span class="token literal-property property">defult</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;No matching configuration was found&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="npm脚本配置" tabindex="-1"><a class="header-anchor" href="#npm脚本配置"><span>npm脚本配置</span></a></h3>`,13),L=n("div",{class:"language-json line-numbers-mode","data-ext":"json","data-title":"json"},[n("pre",{json:"",class:"language-json"},[n("code",null,[n("span",{class:"token comment"},"// package.json文件"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},'"script"'),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    ...
    `),n("span",{class:"token property"},'"build:prod"'),n("span",{class:"token operator"},":"),n("span",{class:"token string"},'"webpack -c ./config/webpack.config.js --env production"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token property"},'"build:dev"'),n("span",{class:"token operator"},":"),n("span",{class:"token string"},'"webpack -c ./config/webpack.config.js --env development"'),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),O=a(`<h2 id="高级篇" tabindex="-1"><a class="header-anchor" href="#高级篇"><span>高级篇</span></a></h2><h3 id="sourcemap" tabindex="-1"><a class="header-anchor" href="#sourcemap"><span>sourceMap</span></a></h3><table><thead><tr><th style="text-align:left;">模式</th><th style="text-align:left;">解释</th></tr></thead><tbody><tr><td style="text-align:left;">eval（默认）</td><td style="text-align:left;">每个module会封装到eval里包裹起来执行，并且会在末尾追加注释 //@sourceURL.</td></tr><tr><td style="text-align:left;">source-map</td><td style="text-align:left;">会生成一个map文件，在bundle末尾追加注释 //# sourceMappingURL=&lt;main.js.map&gt;</td></tr><tr><td style="text-align:left;">hidden-source-map</td><td style="text-align:left;">和source-map一样，但不会在bundle末尾追加注释</td></tr><tr><td style="text-align:left;">inline-source-map</td><td style="text-align:left;">不会打包出map文件，bundle会生成一个DataURL格式的注释</td></tr><tr><td style="text-align:left;">eval-source-map</td><td style="text-align:left;">不会打包出map文件，每个module会通过eval()来执行，并生成DataURL形式的SourceMap</td></tr><tr><td style="text-align:left;">cheap-source-map</td><td style="text-align:left;">生成的map文件只有行数映射，没有记录代码的列数，不包含loader的sourceMap（如bable的sourceMap）</td></tr><tr><td style="text-align:left;">cheap-module-source-map（推荐）</td><td style="text-align:left;">生成的map文件只有行数映射，没有记录代码的列数，包含loader，且也简化列数信息</td></tr></tbody></table><div class="hint-container warning"><p class="hint-container-title">注意</p><p>一般调试代码，只需要行数映射，添加列数映射会增加map文件大小，拖慢编译速度</p></div><p>// main.js.map 文件 mappings：&lt;行映射&gt;;&lt;列映射&gt;</p><h3 id="devserver" tabindex="-1"><a class="header-anchor" href="#devserver"><span>devServer</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 设置服务端代码压缩，减少传输数据与时间</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 设置端口</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置响应头</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
      <span class="token string-property property">&#39;X-Access-Token&#39;</span><span class="token operator">:</span> <span class="token string">&#39;xxxxx&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 设置代理</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>
      <span class="token comment">// 将带有api的url替换为xxx</span>
      <span class="token string-property property">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token string">&#39;xxxxxx&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 设置https &amp; http2，本地开启https主要用于测试浏览器环境，默认无需配置</span>
    <span class="token comment">// 注意： 由于默认配置使用的是自签名证书，浏览器会认为不安全，但我们仍然可以访问</span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// </span>
    <span class="token literal-property property">histtoryApiFallback</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token comment">// 可以根据不同访问路径配置替代页面，配合路由使用</span>
      <span class="token literal-property property">rewrites</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token operator">...</span>
        <span class="token punctuation">{</span><span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">&#39;404.html&#39;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 开发服务器主机,配置后同局域网的开发者可以通过你的ip地址访问你的服务器</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span><span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此属性值表示浏览器对其传输进行了压缩处理： ![compress效果](/assets/images/202207111339173.png</p><h3 id="模块热替换与热加载-hmr" tabindex="-1"><a class="header-anchor" href="#模块热替换与热加载-hmr"><span>模块热替换与热加载（HMR）</span></a></h3><p>热替换：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// 默认开启</span>
    hot： <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>热加载：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// 默认开启</span>
    <span class="token literal-property property">liveReload</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13),A=[o,c,r,u,d,k,v,m,b,g,h,y,x,j,w,f,_,q,z,C,M,P,S,T,E,R,$,F,I,N,U,Z,D,B,L,O];function H(V,W){return l(),t("div",null,A)}const J=e(i,[["render",H],["__file","webpack.html.vue"]]),X=JSON.parse('{"path":"/docs/interview/webpack.html","title":"webpack","lang":"zh-CN","frontmatter":{"title":"webpack","date":"2022-07-06T00:00:00.000Z","description":"wepback简易流程图 为什么要使用webpack 上古时代，通过script标签引入的方法会导致以下几个问题 作用域问题 IIFE方案 可以解决作用域问题，但是该方案会存在大量无用代码，文件体积过大，导致构建速度与加载效率问题，所以不得不对代码进行拆分 代码拆分问题 nodejs 基于 commonjs 的方案可以解决代码拆分问题，但是无法在浏览器...","head":[["meta",{"property":"og:url","content":"https://bzt2017.github.io/docs/interview/webpack.html"}],["meta",{"property":"og:site_name","content":"Tiger"}],["meta",{"property":"og:title","content":"webpack"}],["meta",{"property":"og:description","content":"wepback简易流程图 为什么要使用webpack 上古时代，通过script标签引入的方法会导致以下几个问题 作用域问题 IIFE方案 可以解决作用域问题，但是该方案会存在大量无用代码，文件体积过大，导致构建速度与加载效率问题，所以不得不对代码进行拆分 代码拆分问题 nodejs 基于 commonjs 的方案可以解决代码拆分问题，但是无法在浏览器..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://bzt2017.github.io/assets/images/202207071835850.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-09T08:28:00.000Z"}],["meta",{"property":"article:author","content":"Tiger"}],["meta",{"property":"article:published_time","content":"2022-07-06T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-09T08:28:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"webpack\\",\\"image\\":[\\"https://bzt2017.github.io/assets/images/202207071835850.png\\"],\\"datePublished\\":\\"2022-07-06T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-09T08:28:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Tiger\\",\\"url\\":\\"https://bzt2017.github.io/myBlog/\\"}]}"]]},"headers":[{"level":2,"title":"为什么要使用webpack","slug":"为什么要使用webpack","link":"#为什么要使用webpack","children":[]},{"level":2,"title":"竞品","slug":"竞品","link":"#竞品","children":[]},{"level":2,"title":"webPack配置","slug":"webpack配置","link":"#webpack配置","children":[]},{"level":2,"title":"webpack常用插件","slug":"webpack常用插件","link":"#webpack常用插件","children":[]},{"level":2,"title":"webpack-dev-server","slug":"webpack-dev-server","link":"#webpack-dev-server","children":[]},{"level":2,"title":"资源模块","slug":"资源模块","link":"#资源模块","children":[{"level":3,"title":"asset/resource","slug":"asset-resource","link":"#asset-resource","children":[]},{"level":3,"title":"asset/inline","slug":"asset-inline","link":"#asset-inline","children":[]},{"level":3,"title":"asset/source","slug":"asset-source","link":"#asset-source","children":[]},{"level":3,"title":"asset","slug":"asset","link":"#asset","children":[]}]},{"level":2,"title":"loaders","slug":"loaders","link":"#loaders","children":[{"level":3,"title":"加载样式","slug":"加载样式","link":"#加载样式","children":[]},{"level":3,"title":"抽离 & 压缩css","slug":"抽离-压缩css","link":"#抽离-压缩css","children":[]},{"level":3,"title":"自定义json模块parser","slug":"自定义json模块parser","link":"#自定义json模块parser","children":[]}]},{"level":2,"title":"babel-loader","slug":"babel-loader","link":"#babel-loader","children":[]},{"level":2,"title":"代码分离","slug":"代码分离","link":"#代码分离","children":[{"level":3,"title":"入口起点","slug":"入口起点","link":"#入口起点","children":[]},{"level":3,"title":"防止重复","slug":"防止重复","link":"#防止重复","children":[]},{"level":3,"title":"动态引入","slug":"动态引入","link":"#动态引入","children":[]}]},{"level":2,"title":"优化缓存","slug":"优化缓存","link":"#优化缓存","children":[{"level":3,"title":"解决chunk文件缓存问题","slug":"解决chunk文件缓存问题","link":"#解决chunk文件缓存问题","children":[]},{"level":3,"title":"缓存第三方库","slug":"缓存第三方库","link":"#缓存第三方库","children":[]}]},{"level":2,"title":"生产环境与开发环境配置","slug":"生产环境与开发环境配置","link":"#生产环境与开发环境配置","children":[{"level":3,"title":"配置拆分","slug":"配置拆分","link":"#配置拆分","children":[]},{"level":3,"title":"配置文件合并","slug":"配置文件合并","link":"#配置文件合并","children":[]},{"level":3,"title":"npm脚本配置","slug":"npm脚本配置","link":"#npm脚本配置","children":[]}]},{"level":2,"title":"高级篇","slug":"高级篇","link":"#高级篇","children":[{"level":3,"title":"sourceMap","slug":"sourcemap","link":"#sourcemap","children":[]},{"level":3,"title":"devServer","slug":"devserver","link":"#devserver","children":[]},{"level":3,"title":"模块热替换与热加载（HMR）","slug":"模块热替换与热加载-hmr","link":"#模块热替换与热加载-hmr","children":[]}]}],"git":{"createdTime":1715939602000,"updatedTime":1720513680000,"contributors":[{"name":"tiger-github","email":"634513456@qq.com","commits":2}]},"readingTime":{"minutes":12.6,"words":3780},"filePathRelative":"docs/interview/webpack.md","localizedDate":"2022年7月6日","excerpt":"<p><img src=\\"/assets/images/202207071835850.png\\" alt=\\"wepback简易流程图\\" loading=\\"lazy\\"></p>\\n<h2>为什么要使用webpack</h2>\\n<p>上古时代，通过script标签引入的方法会导致以下几个问题</p>\\n<ul>\\n<li>\\n<p>作用域问题</p>\\n<p><strong>IIFE方案</strong> 可以解决作用域问题，但是该方案会存在大量无用代码，文件体积过大，导致构建速度与加载效率问题，所以不得不对代码进行拆分</p>\\n</li>\\n<li>\\n<p>代码拆分问题</p>\\n<p><strong>nodejs</strong> 基于 <strong>commonjs</strong> 的方案可以解决代码拆分问题，但是无法在浏览器运行</p>\\n</li>\\n<li>\\n<p>如何让浏览器支持模块</p>\\n<p><strong>browesrify</strong> 与 <strong>requirejs</strong> 的方案可以使类似commonjs运行在浏览器内，但是使用起来对比commonjs不够简洁</p>\\n<p><strong>esmodule</strong> 是es提出的规范，专门用来做模块管理，但这种方案对浏览器的支持不够完整</p>\\n</li>\\n</ul>","autoDesc":true}');export{J as comp,X as data};
