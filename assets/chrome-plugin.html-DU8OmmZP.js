import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,o as a,b as t}from"./app-D6rFJg60.js";const p={},e=t(`<p>今天给大家分享一下chrome插件的开发</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>在开发插件前，你需要html、css、js的基础知识</p></div><h2 id="插件目录结构" tabindex="-1"><a class="header-anchor" href="#插件目录结构"><span>插件目录结构</span></a></h2><p>myPlugin</p><p>|---js</p><p>|---</p><p>|---</p><ol><li>manifest.json文件</li><li>popup.html文件</li><li>popup.js文件</li></ol><h2 id="manifest文件" tabindex="-1"><a class="header-anchor" href="#manifest文件"><span>manifest文件</span></a></h2><p>manifest文件是用来描述插件的一个json文件 它有几个重要的参数</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的第一个扩展程序&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 浏览器默认属性，必须为2</span>
    <span class="token property">&quot;manifest_version&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;第一个由我开发的扩展&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 打开插件后弹出的页面</span>
    <span class="token property">&quot;browser_action&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;default_icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;icon.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default_popup&quot;</span><span class="token operator">:</span> <span class="token string">&quot;popup.html&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 指定浏览器放开的权限列表</span>
    <span class="token property">&quot;permissions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;notifications&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 调用存储功能</span>
      <span class="token string">&quot;storage&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 还可以指定对页面拥有操作权限</span>
      <span class="token string">&quot;https://*.baidu.com&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 所有页面都有权限操作</span>
      <span class="token string">&quot;&lt;all_urls&gt;&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;options_page&quot;</span><span class="token operator">:</span><span class="token string">&quot;options.html&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 代码注入</span>
    <span class="token property">&quot;content_scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 需要像那些页面注入（可以使用正则匹配）</span>
        <span class="token property">&quot;matches&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;js&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;jquery.mini.js&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;js/content.js&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token property">&quot;background&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;background.js&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="content-js文件" tabindex="-1"><a class="header-anchor" href="#content-js文件"><span>content.js文件</span></a></h2><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 发送消息</span>
chrome<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">todo</span><span class="token operator">:</span> <span class="token string">&quot;showPageAction&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>打开chrome浏览器，打开扩展程序，开启开发者模式，点击加载已解压的chrome插件，选择你开发好的插件文件夹</p><h2 id="实战-dino小恐龙游戏插件开发" tabindex="-1"><a class="header-anchor" href="#实战-dino小恐龙游戏插件开发"><span>实战：dino小恐龙游戏插件开发</span></a></h2><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token parameter">valW<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>valH<span class="token operator">=</span><span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.runner-canvas&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&#39;2d&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> checkPoint <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> canvas<span class="token punctuation">.</span>width <span class="token operator">*</span> valW<span class="token punctuation">,</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> canvas<span class="token punctuation">.</span>height <span class="token operator">*</span> valH<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        canvas<span class="token punctuation">,</span>
        context<span class="token punctuation">,</span>
        checkPoint<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">pixelData</span><span class="token punctuation">(</span><span class="token parameter">checkPoint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span>checkPoint<span class="token punctuation">.</span>x<span class="token punctuation">,</span> checkPoint<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">r</span><span class="token operator">:</span> data<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">g</span><span class="token operator">:</span> data<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> data<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isObstruction</span><span class="token punctuation">(</span><span class="token parameter">pixelData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">}</span> <span class="token operator">=</span> pixelData
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token operator">+</span>g<span class="token operator">+</span>b<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">===</span> <span class="token number">83</span> <span class="token operator">&amp;&amp;</span> g <span class="token operator">===</span> <span class="token number">83</span> <span class="token operator">&amp;&amp;</span> b <span class="token operator">===</span> <span class="token number">83</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isObstructionComing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> check <span class="token operator">=</span> <span class="token function">isObstruction</span><span class="token punctuation">(</span><span class="token function">pixelData</span><span class="token punctuation">(</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">.</span>checkPoint<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isObstruction</span><span class="token punctuation">(</span><span class="token function">pixelData</span><span class="token punctuation">(</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>checkPoint<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> check
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">keyEvent</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> keyCode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> event <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">&#39;Events&#39;</span><span class="token punctuation">)</span>
    event<span class="token punctuation">.</span><span class="token function">initEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    event<span class="token punctuation">.</span>keyCode <span class="token operator">=</span> keyCode
    event<span class="token punctuation">.</span>which <span class="token operator">=</span> keyCode
    document<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">keyEvent</span><span class="token punctuation">(</span><span class="token string">&#39;keydown&#39;</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObstructionComing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">jump</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">__main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span>check<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">__main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17),o=[e];function c(i,l){return a(),s("div",null,o)}const k=n(p,[["render",c],["__file","chrome-plugin.html.vue"]]),d=JSON.parse('{"path":"/docs/share/chrome-plugin.html","title":"chrome插件开发","lang":"zh-CN","frontmatter":{"title":"chrome插件开发","date":"2022-07-19T00:00:00.000Z","description":"今天给大家分享一下chrome插件的开发 提示 在开发插件前，你需要html、css、js的基础知识 插件目录结构 myPlugin |---js |--- |--- manifest.json文件 popup.html文件 popup.js文件 manifest文件 manifest文件是用来描述插件的一个json文件 它有几个重要的参数 conte...","head":[["meta",{"property":"og:url","content":"https://bzt2017.github.io/docs/share/chrome-plugin.html"}],["meta",{"property":"og:site_name","content":"Tiger"}],["meta",{"property":"og:title","content":"chrome插件开发"}],["meta",{"property":"og:description","content":"今天给大家分享一下chrome插件的开发 提示 在开发插件前，你需要html、css、js的基础知识 插件目录结构 myPlugin |---js |--- |--- manifest.json文件 popup.html文件 popup.js文件 manifest文件 manifest文件是用来描述插件的一个json文件 它有几个重要的参数 conte..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-25T10:55:16.000Z"}],["meta",{"property":"article:author","content":"Tiger"}],["meta",{"property":"article:published_time","content":"2022-07-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-25T10:55:16.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"chrome插件开发\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-07-19T00:00:00.000Z\\",\\"dateModified\\":\\"2024-06-25T10:55:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Tiger\\",\\"url\\":\\"https://bzt2017.github.io/myBlog/\\"}]}"]]},"headers":[{"level":2,"title":"插件目录结构","slug":"插件目录结构","link":"#插件目录结构","children":[]},{"level":2,"title":"manifest文件","slug":"manifest文件","link":"#manifest文件","children":[]},{"level":2,"title":"content.js文件","slug":"content-js文件","link":"#content-js文件","children":[]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"实战：dino小恐龙游戏插件开发","slug":"实战-dino小恐龙游戏插件开发","link":"#实战-dino小恐龙游戏插件开发","children":[]}],"git":{"createdTime":1715939602000,"updatedTime":1719312916000,"contributors":[{"name":"tiger-github","email":"634513456@qq.com","commits":1}]},"readingTime":{"minutes":1.42,"words":425},"filePathRelative":"docs/share/chrome-plugin.md","localizedDate":"2022年7月19日","excerpt":"<p>今天给大家分享一下chrome插件的开发</p>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>在开发插件前，你需要html、css、js的基础知识</p>\\n</div>\\n<h2>插件目录结构</h2>\\n<p>myPlugin</p>\\n<p>|---js</p>\\n<p>|---</p>\\n<p>|---</p>\\n<ol>\\n<li>manifest.json文件</li>\\n<li>popup.html文件</li>\\n<li>popup.js文件</li>\\n</ol>\\n<h2>manifest文件</h2>","autoDesc":true}');export{k as comp,d as data};
